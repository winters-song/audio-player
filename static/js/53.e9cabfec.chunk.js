"use strict";(self.webpackChunkaudio_player=self.webpackChunkaudio_player||[]).push([[53],{8353:(t,e,n)=>{n.r(e),n.d(e,{default:()=>J});var i,s=n(5043),a=n(7528),r=n(5458);const l="#f0f0f0",o=r.A.div(i||(i=(0,a.A)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n  .audio-player {\n    padding: 0 20px;\n    height: 80px;\n    background-image: linear-gradient(180deg, #00000000 0%, #00000080 100%);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: ",";\n  }\n\n  .progress-bar{\n    position: absolute;\n    top: -4px;\n    left: 20px;\n    right: 20px;\n\n    .ant-slider{\n      margin: 0;\n\n      .ant-slider-rail {\n        background-color: rgba(255, 255, 255, 0.3);\n        /* background-color: white;\n        box-shadow: 0 0 12px 0px rgb(255 255 255), 0 0 12px 3px rgb(0 210 255), 0 0 20px 0px rgb(0 179 255), 0 0 40px 10px rgb(0 155 255), 0 0 60px 20px rgb(0 155 255); */\n      }\n\n      .ant-slider-track{\n        background-color: ",";\n      }\n    }\n  }\n\n  .center-bar{\n    width: 240px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-around;\n    z-index: 2;\n    \n    .play-btn{\n      width: 44px;\n      height: 44px;\n      border: 2px solid ","; \n      border-radius: 50%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      cursor: pointer;\n      svg{\n        width: 30px;\n        height: 30px;\n      }\n\n      .icon-play{\n        position: relative;\n        left: 1px;\n      }\n    }\n\n    .pager-btn{\n      width: 44px;\n      height: 44px;\n      border-radius: 50%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      cursor: pointer;\n      svg{\n        width: 30px;\n        height: 30px;\n      }\n    }\n  }\n\n  .left-bar{\n    position: absolute;\n    left: 20px;\n    text-align: left;\n    display: flex;\n    flex-direction: row;\n\n    .cover{\n      width: 44px;\n      height: 44px;\n      border-radius: 4px;\n      background-size: contain;\n      margin-right: 10px;\n    }\n    .col{\n      display: flex;\n      flex-direction: column;\n    }\n\n    .name{\n      width: 200px;\n      color: white;\n    }\n    \n    .time{\n      margin-top: 5px;\n      color: #ffffff80;\n      font-size: 14px;\n    }\n  }\n\n  .right-bar{\n    position: absolute;\n    right: 20px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    column-gap: 20px;\n\n    .btn{\n      width: 44px;\n      height: 44px;\n      border-radius: 50%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      cursor: pointer;\n      svg{\n        width: 30px;\n        height: 30px;\n      }\n    }\n\n    .list-btn{\n      svg{\n        width: 28px;\n        height: 28px;\n        position: relative;\n        top: -1px;\n      }\n    }\n\n    .volume-wrapper{\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n\n      .volume-slider{\n        width: 100px;\n\n        .ant-slider-rail {\n          background-color: rgb(255, 255, 255, 0.1);\n        }\n\n        .ant-slider-track{\n          background-color: ",";\n        }\n      }\n    }\n  }\n  \n"])),l,l,l,l);var c=n(5681),h=n(3640),d=n(579);const p=()=>(0,d.jsx)("svg",{className:"icon icon-play",viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",children:(0,d.jsx)("path",{d:"M817.088 484.96l-512-323.744C295.232 154.976 282.752 154.592 272.576 160.224 262.336 165.856 256 176.608 256 188.256l0 647.328c0 11.648 6.336 22.4 16.576 28.032 4.8 2.656 10.112 3.968 15.424 3.968 5.952 0 11.904-1.664 17.088-4.928l512-323.616C826.368 533.184 832 522.976 832 512 832 501.024 826.368 490.816 817.088 484.96z"})}),u=()=>(0,d.jsx)("svg",{className:"icon icon-pause",viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",children:(0,d.jsx)("path",{d:"M341.332992 142.222336c47.128576 0 85.334016 38.20544 85.334016 85.332992v568.889344c0 47.128576-38.20544 85.332992-85.334016 85.332992-47.127552 0-85.332992-38.20544-85.332992-85.332992V227.555328c0-47.128576 38.20544-85.332992 85.332992-85.332992z m341.334016 0c47.127552 0 85.332992 38.20544 85.332992 85.332992v568.889344c0 47.128576-38.20544 85.332992-85.332992 85.332992-47.128576 0-85.334016-38.20544-85.334016-85.332992V227.555328c0-47.128576 38.20544-85.332992 85.334016-85.332992z"})}),v=()=>(0,d.jsx)("svg",{className:"icon icon-prev",viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",children:(0,d.jsx)("path",{d:"M341.333333 746.666667a21.333333 21.333333 0 0 1-21.333333 21.333333h-42.666667a21.333333 21.333333 0 0 1-21.333333-21.333333v-469.333334a21.333333 21.333333 0 0 1 21.333333-21.333333h42.666667a21.333333 21.333333 0 0 1 21.333333 21.333333zM768 280.32a32.853333 32.853333 0 0 0-15.786667-27.733333l-5.12-2.56a31.146667 31.146667 0 0 0-34.133333 0l-314.453333 222.293333a32 32 0 0 0-13.653334 26.026667v26.453333a32 32 0 0 0 13.653334 26.026667l314.453333 221.013333a31.146667 31.146667 0 0 0 34.133333 0l5.12-2.56a32.426667 32.426667 0 0 0 15.786667-27.733333z"})}),x=()=>(0,d.jsx)("svg",{className:"icon icon-next",viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",children:(0,d.jsx)("path",{d:"M768 277.333333v469.333334a21.333333 21.333333 0 0 1-21.333333 21.333333h-42.666667a21.333333 21.333333 0 0 1-21.333333-21.333333v-469.333334a21.333333 21.333333 0 0 1 21.333333-21.333333h42.666667a21.333333 21.333333 0 0 1 21.333333 21.333333zM311.04 251.733333a31.146667 31.146667 0 0 0-34.133333 0l-5.12 2.56a32.426667 32.426667 0 0 0-15.786667 26.026667v462.933333a32.853333 32.853333 0 0 0 15.786667 27.733334l5.12 2.56a32 32 0 0 0 34.133333 0l314.453333-221.013334a32 32 0 0 0 13.653334-26.026666v-26.453334a32 32 0 0 0-13.653334-26.026666z"})}),m=()=>(0,d.jsx)("svg",{className:"icon icon-volume",viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",children:(0,d.jsx)("path",{d:"M462.06 142.1L284.12 320H80c-26.52 0-48 21.48-48 48v288c0 26.5 21.48 48 48 48h204.12l177.94 177.9c30.06 30.06 81.94 8.94 81.94-33.94V176.04c0-42.92-51.92-63.96-81.94-33.94zM992 512c0-127.06-64.12-243.88-171.54-312.48-22.38-14.28-52.06-7.64-66.24 14.92s-7.56 52.42 14.82 66.72C848.54 331.94 896 418.22 896 512s-47.46 180.06-126.96 230.84c-22.38 14.28-29 44.14-14.82 66.72 13.02 20.72 42.24 30.28 66.24 14.92C927.88 755.88 992 639.06 992 512z m-283.54-153.74c-23.16-12.66-52.38-4.32-65.22 18.9-12.78 23.22-4.32 52.4 18.9 65.22C687.96 456.56 704 483.26 704 512c0 28.76-16.04 55.44-41.84 69.62-23.22 12.82-31.68 42-18.9 65.22 12.86 23.32 42.1 31.6 65.22 18.9 56.46-31.1 91.54-90 91.54-153.76s-35.08-122.64-91.56-153.72z"})}),f=()=>(0,d.jsx)("svg",{className:"icon icon-volume-mute",viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",children:(0,d.jsx)("path",{d:"M430.06 142.1L252.12 320H48c-26.52 0-48 21.48-48 48v288c0 26.5 21.48 48 48 48h204.12l177.94 177.9c30.06 30.06 81.94 8.94 81.94-33.94V176.04c0-42.92-51.92-63.96-81.94-33.94zM923.28 512l91.28-91.28c12.6-12.6 12.6-33.04 0-45.64l-45.64-45.64c-12.6-12.6-33.04-12.6-45.64 0L832 420.72l-91.28-91.28c-12.6-12.6-33.04-12.6-45.64 0l-45.64 45.64c-12.6 12.6-12.6 33.04 0 45.64L740.72 512l-91.26 91.26c-12.6 12.6-12.6 33.04 0 45.64l45.64 45.64c12.6 12.6 33.04 12.6 45.64 0L832 603.28l91.28 91.28c12.6 12.6 33.04 12.6 45.64 0l45.64-45.64c12.6-12.6 12.6-33.04 0-45.64L923.28 512z"})}),g=()=>(0,d.jsx)("svg",{className:"icon icon-fullscreen",viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",children:(0,d.jsx)("path",{d:"M213.333333 213.333333h213.333334V128H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v256h85.333333V213.333333zM170.666667 896h256v-85.333333H213.333333v-213.333334H128v256a42.666667 42.666667 0 0 0 42.666667 42.666667z m725.333333-42.666667v-256h-85.333333v213.333334h-213.333334v85.333333h256a42.666667 42.666667 0 0 0 42.666667-42.666667zM597.333333 213.333333h213.333334v213.333334h85.333333V170.666667a42.666667 42.666667 0 0 0-42.666667-42.666667h-256v85.333333z","p-id":"10477"})}),w=()=>(0,d.jsx)("svg",{className:"icon icon-play-list",viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",children:(0,d.jsx)("path",{d:"M90.35039205 899.00880511h843.2992159a22.19208431 22.19208431 0 0 0 22.19208552-22.19208553v-44.38416861a22.19208431 22.19208431 0 0 0-22.19208552-22.19208552H90.35039205a22.19208431 22.19208431 0 0 0-22.19208552 22.19208552v44.38416861a22.19208431 22.19208431 0 0 0 22.19208552 22.19208553z m0-310.68918518h843.2992159a22.19208431 22.19208431 0 0 0 22.19208552-22.19208553v-44.38416862a22.19208431 22.19208431 0 0 0-22.19208552-22.19208552H90.35039205a22.19208431 22.19208431 0 0 0-22.19208552 22.19208552v44.38416862a22.19208431 22.19208431 0 0 0 22.19208552 22.19208553z m355.07335381-310.68918519a22.19208431 22.19208431 0 0 1-22.19208431-22.19208552v-44.38416862a22.19208431 22.19208431 0 0 1 22.19208431-22.19208553h488.22586209a22.19208431 22.19208431 0 0 1 22.19208552 22.19208553v44.38416862a22.19208431 22.19208431 0 0 1-22.19208552 22.19208552H445.42374586zM68.15830653 123.04037267a35.50733563 35.50733563 0 0 1 53.12785066-30.82480541l203.61237724 116.35309985a35.50733563 35.50733563 0 0 1 0 61.64961083l-203.61237724 116.35309985A35.50733563 35.50733563 0 0 1 68.15830653 355.74657238V123.04037267z"})}),b=()=>(0,d.jsx)("svg",{className:"icon icon-loop",viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",children:(0,d.jsx)("path",{d:"M694.4 854.4H195.2l48 44.8c9.6 6.4 16 16 16 28.8-3.2 19.2-19.2 32-38.4 32-9.6 0-22.4-6.4-28.8-12.8l-108.8-96c-12.8-12.8-16-35.2 0-48L192 704c6.4-6.4 19.2-9.6 28.8-9.6 19.2 0 35.2 16 35.2 35.2 0 9.6-6.4 19.2-12.8 25.6l-41.6 38.4h496c112 0 198.4-89.6 198.4-198.4v-86.4c0-19.2 12.8-32 32-32s32 12.8 32 32v86.4c0 140.8-118.4 259.2-265.6 259.2zM329.6 169.6h496l-48-44.8c-9.6-6.4-16-16-16-28.8 3.2-19.2 19.2-32 38.4-32 9.6 0 22.4 6.4 28.8 12.8l108.8 96c12.8 12.8 16 35.2 0 48L832 320c-6.4 6.4-19.2 9.6-28.8 9.6-19.2 0-35.2-16-35.2-35.2 0-9.6 6.4-19.2 12.8-25.6l41.6-38.4H326.4C217.6 233.6 128 323.2 128 435.2v89.6c0 19.2-12.8 32-32 32s-32-12.8-32-32v-86.4C64 288 182.4 169.6 329.6 169.6z","p-id":"2716"})}),y=()=>(0,d.jsxs)("svg",{className:"icon icon-single-cycle",viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",children:[(0,d.jsx)("path",{d:"M928 476.8c-19.2 0-32 12.8-32 32v86.4c0 108.8-86.4 198.4-198.4 198.4H201.6l41.6-38.4c6.4-6.4 12.8-16 12.8-25.6 0-19.2-16-35.2-35.2-35.2-9.6 0-22.4 3.2-28.8 9.6l-108.8 99.2c-16 12.8-12.8 35.2 0 48l108.8 96c6.4 6.4 19.2 12.8 28.8 12.8 19.2 0 35.2-12.8 38.4-32 0-12.8-6.4-22.4-16-28.8l-48-44.8h499.2c147.2 0 265.6-118.4 265.6-259.2v-86.4c0-19.2-12.8-32-32-32zM96 556.8c19.2 0 32-12.8 32-32v-89.6c0-112 89.6-201.6 198.4-204.8h496l-41.6 38.4c-6.4 6.4-12.8 16-12.8 25.6 0 19.2 16 35.2 35.2 35.2 9.6 0 22.4-3.2 28.8-9.6l105.6-99.2c16-12.8 12.8-35.2 0-48l-108.8-96c-6.4-6.4-19.2-12.8-28.8-12.8-19.2 0-35.2 12.8-38.4 32 0 12.8 6.4 22.4 16 28.8l48 44.8H329.6C182.4 169.6 64 288 64 438.4v86.4c0 19.2 12.8 32 32 32z","p-id":"6501"}),(0,d.jsx)("path",{d:"M544 672V352h-48L416 409.6l16 41.6 60.8-41.6V672z","p-id":"6502"})]}),j=()=>(0,d.jsx)("svg",{className:"icon icon-single-cycle",viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",children:(0,d.jsx)("path",{d:"M844.8 665.6c-6.4-6.4-16-12.8-25.6-9.6-19.2 0-35.2 16-35.2 35.2 0 9.6 6.4 19.2 12.8 25.6l41.6 41.6c-44.8-6.4-86.4-22.4-121.6-51.2-3.2 0-3.2-3.2-6.4-6.4L332.8 304C268.8 233.6 192 195.2 99.2 195.2c-19.2 0-35.2 16-35.2 35.2s16 32 35.2 32c73.6 0 134.4 32 182.4 86.4l384 400 6.4 6.4c48 38.4 108.8 64 172.8 70.4l-48 44.8c-9.6 6.4-16 19.2-16 28.8 0 19.2 19.2 35.2 38.4 32 9.6 0 19.2-6.4 25.6-12.8l99.2-92.8c16-16 16-41.6 0-57.6l-99.2-102.4z m-3.2-556.8c-12.8-16-32-19.2-48-6.4-9.6 6.4-12.8 16-12.8 25.6 0 12.8 3.2 22.4 16 28.8l41.6 41.6c-73.6 9.6-140.8 38.4-192 89.6l-115.2 118.4c-12.8 12.8-12.8 32 0 44.8 6.4 6.4 16 9.6 25.6 9.6s19.2-3.2 25.6-9.6l112-118.4c41.6-38.4 92.8-64 147.2-70.4l-44.8 44.8c-6.4 6.4-12.8 16-12.8 25.6 0 19.2 16 35.2 32 35.2 9.6 0 19.2-3.2 28.8-9.6L950.4 256c12.8-12.8 12.8-35.2 0-48l-108.8-99.2m-438.4 448c-9.6 0-19.2 3.2-25.6 9.6l-118.4 121.6c-48 44.8-96 67.2-160 67.2H96c-19.2 0-35.2 16-35.2 35.2s16 32 35.2 32h3.2c83.2 0 147.2-32 211.2-86.4l121.6-124.8c6.4-6.4 9.6-12.8 9.6-22.4 0-9.6-3.2-16-9.6-22.4-9.6-6.4-19.2-9.6-28.8-9.6z","p-id":"2884"})});var C=n(3003),E=n(6151);class z{constructor(t){this.el=null,this.audioCtx=null,this.analyser=null,this.stats=void 0,this.inited=!1,this.removeResizeEvent=void 0,Object.assign(this,t)}init(){}stopVisualize(){}resetCanvas(){}drawEachFrame(t){}destroy(){this.stopVisualize(),this.removeResizeEvent&&this.removeResizeEvent()}}var N=n(9408),A=n(7583);var k=n(1637);const L=[class extends z{constructor(){super(...arguments),this.frameTimer=0,this.dataLength=50,this.floats=[],this.FLOAT_HEIGHT=4,this.DROP_DISTANCE=1,this.BAR_GAP=2}init(){if(!this.el)return;if(this.inited)return;this.inited=!0;const t=()=>{if(this.el){var t=window.innerWidth,e=window.innerHeight;this.el.width=t,this.el.height=e,console.log("do resize")}};window.addEventListener("resize",t),this.removeResizeEvent=()=>{window.removeEventListener("resize",t)}}stopVisualize(){this.frameTimer&&(window.cancelAnimationFrame(this.frameTimer),this.frameTimer=0,this.resetCanvas())}resetCanvas(){if(this.el){const t=new Uint8Array(this.dataLength).map((()=>0));this.clearFloats(),this.clearCanvas(),this.drawFloats(t)}}drawEachFrame(t){if(this.frameTimer=requestAnimationFrame((()=>{this.stats.begin(),this.drawEachFrame(t),this.stats.end()})),this.analyser){this.analyser.getByteFrequencyData(t);const e=t.slice(0,Math.min(this.dataLength,t.length));this.clearCanvas(),this.drawFloats(e),this.drawBars(e)}}clearFloats(){this.floats=[]}clearCanvas(){if(!this.el)return;const t=this.el.width,e=this.el.height,n=this.el.getContext("2d");n&&(n.fillStyle="#222222",n.fillRect(0,0,t,e))}drawFloats(t){if(!this.el)return;const e=this.el.width,n=this.el.height,i=this.el.getContext("2d");if(!i)return;t.forEach(((t,e)=>{this.floats[e]=this.floats[e]||this.FLOAT_HEIGHT;const n=t+this.FLOAT_HEIGHT,i=this.floats[e]-this.DROP_DISTANCE;this.floats[e]=Math.max(i,n)}));const s=e/t.length-this.BAR_GAP;let a=0;this.floats.forEach((t=>{const e=t/128*n/2;i.fillStyle="#bbb",i.fillRect(a,n-e,s,this.FLOAT_HEIGHT),a+=s+this.BAR_GAP}))}drawBars(t){if(!this.el)return;const e=this.el.width,n=this.el.height,i=this.el.getContext("2d");if(!i)return;const s=e/t.length-this.BAR_GAP;let a=0;t.forEach((t=>{const r=t/128*n/2,l=i.createLinearGradient(e/2,0,e/2,n);l.addColorStop(0,"red"),l.addColorStop(.5,"yellow"),l.addColorStop(1,"green"),i.fillStyle=l,i.fillRect(a,n-r,s,r),a+=s+this.BAR_GAP}))}},class extends z{constructor(t){super(t),this.ctx=void 0,this.postctx=void 0,this.frame=0,this.frameTimer=0,this.dataLength=60,this.dataOffset=5,this.gap=6,this.ctx=document.createElement("canvas").getContext("2d"),this.el?this.postctx=this.el.getContext("2d"):this.postctx=null}init(){if(!this.el)return;if(this.inited)return;this.inited=!0;const t=()=>{if(this.el){var t=window.innerWidth,e=window.innerHeight;this.el.width=t,this.el.height=e,console.log("do resize")}};window.addEventListener("resize",t),this.removeResizeEvent=()=>{window.removeEventListener("resize",t)}}stopVisualize(){this.frameTimer&&(window.cancelAnimationFrame(this.frameTimer),this.frameTimer=0,this.frame=0,this.resetCanvas())}resetCanvas(){this.el&&this.clearCanvas()}clearCanvas(){this.postctx&&this.postctx.clearRect(0,0,this.postctx.canvas.width,this.postctx.canvas.height)}draw(t){if(!this.el||!this.postctx||!this.ctx)return;this.frame++,this.ctx.canvas.width=this.postctx.canvas.width=this.el.width,this.ctx.canvas.height=this.postctx.canvas.height=this.el.height;let e=this.ctx;e.clearRect(0,0,e.canvas.width,e.canvas.height);let n=this.el.width/this.dataLength,i=this.gap,s=.8*this.el.height,a=n-this.gap;const r=t.slice(this.dataOffset,Math.min(this.dataLength,t.length)+this.dataOffset);for(let l=0;l<this.dataLength;l++){if(!r[l])continue;let t=r[l]>>3,o=i+l*n;e.fillStyle="hsl(".concat((.5*this.frame+2*l)%360,", 100%, 50%)");for(let i=0;i<t;i++){let t=s-i*n;e.beginPath(),e.roundRect(o,t,a,a,3),e.fill()}}this.postctx.clearRect(0,0,this.postctx.canvas.width,this.postctx.canvas.height),this.postctx.globalCompositeOperation="source-over",this.postctx.drawImage(this.ctx.canvas,0,0),this.postctx.globalCompositeOperation="lighten",this.postctx.filter="blur(4px)",this.postctx.drawImage(this.ctx.canvas,0,0),this.postctx.filter="blur(0)",this.postctx.globalCompositeOperation="source-over"}drawEachFrame(t){this.el&&this.postctx&&this.ctx&&(this.frameTimer=requestAnimationFrame((()=>{this.stats.begin(),this.drawEachFrame(t),this.stats.end()})),this.analyser&&(this.analyser.getByteFrequencyData(t),this.draw(t)))}},class extends z{constructor(){super(...arguments),this.renderer=null,this.scene=void 0,this.camera=void 0,this.cube=void 0,this.particleGeometry=void 0,this.length=1024,this.inited=!1,this.controls=null}init(){if(!this.el)return;if(this.inited)return;this.inited=!0,this.scene=new N.Z58,this.camera=new N.ubm(50,window.innerWidth/window.innerHeight,.1,2e3),this.camera.position.set(0,50,400),this.renderer=new N.JeP({antialias:!0,canvas:this.el}),this.drawParticle(),this.controls=new A.N(this.camera,this.el),this.controls.autoRotate=!0;const t=()=>{if(this.el){var t=window.innerWidth,e=window.innerHeight;this.el.width=t,this.el.height=e,this.renderer&&this.camera&&(this.renderer.setSize(t,e),this.camera.aspect=t/e,this.camera.updateProjectionMatrix())}};window.addEventListener("resize",t),this.removeResizeEvent=()=>{window.removeEventListener("resize",t)}}drawParticle(){var t,e;if(!this.scene||!this.camera)return;this.particleGeometry=new N.LoY;const n=new Float32Array(3*this.length),i=new Float32Array(3*this.length);for(let l=0,o=0,c=n.length;l<c;l+=3,o++)n[l]=1.1*(o-this.length/2),n[l+1]=0,n[l+2]=0,i[l]=1,i[l+1]=1,i[l+2]=1;this.particleGeometry.setAttribute("position",new N.THS(n,3)),this.particleGeometry.setAttribute("color",new N.THS(i,3));const s=new N.BH$({vertexColors:!0,size:3}),a=new N.ONl(this.particleGeometry,s);null===(t=this.scene)||void 0===t||t.add(a);const r=new N.fTw(400,10);null===(e=this.scene)||void 0===e||e.add(r)}drawEachFrame(t){var e;if(null===(e=this.renderer)||void 0===e||e.setAnimationLoop((()=>{var e;this.stats.begin(),null===(e=this.controls)||void 0===e||e.update(),this.drawEachFrame(t),this.stats.end()})),this.scene&&this.camera&&this.particleGeometry&&this.analyser){var n;this.analyser.getByteFrequencyData(t);const e=this.particleGeometry.attributes.position.array,i=this.particleGeometry.attributes.color.array,s=this.length/2;for(let n=0;n<s;n++){const a=3*(n+s),r=3*(s-n);e[r+1]=e[a+1]=t[n]/2,i[r+1]=i[a+1]=t[n]/255,i[r+2]=i[a+2]=1-t[n]/255}this.particleGeometry.attributes.position.needsUpdate=!0,this.particleGeometry.attributes.color.needsUpdate=!0,this.camera.lookAt(this.scene.position),null===(n=this.renderer)||void 0===n||n.render(this.scene,this.camera)}}stopVisualize(){var t;null===(t=this.renderer)||void 0===t||t.setAnimationLoop(null)}}];class M{constructor(){if(this.canvas2dEl=null,this.canvasWebglEl=null,this.audioCtx=null,this.analyser=null,this.scene=null,this.stats=null,this.source=null,this.stream=null,this.currentEffectMode=void 0,this.canvas2dEl=document.querySelector("#canvas-2d"),this.canvasWebglEl=document.querySelector("#canvas-webgl"),!this.canvas2dEl||!this.canvasWebglEl)throw new Error("\u627e\u4e0d\u5230 canvas");this.canvasWebglEl.width=this.canvas2dEl.width=window.innerWidth,this.canvasWebglEl.height=this.canvas2dEl.height=window.innerHeight,this.stats=new Stats,this.stats.showPanel(0),document.body.appendChild(this.stats.dom)}visualize(t){if(this.stream=t,this.audioCtx=this.audioCtx||new AudioContext,this.analyser=this.analyser||this.audioCtx.createAnalyser(),this.audioCtx&&this.analyser){var e;this.source=null===(e=this.audioCtx)||void 0===e?void 0:e.createMediaStreamSource(t),this.source.connect(this.analyser);const n=this.analyser.frequencyBinCount;console.log("bufferLength",n);const i=new Uint8Array(n);!this.scene&&this.currentEffectMode&&this.toggleEffect(this.currentEffectMode),this.scene.init(),this.scene.drawEachFrame(i)}}stopVisualize(){var t;null===(t=this.scene)||void 0===t||t.stopVisualize()}resetCanvas(){this.scene.resetCanvas()}toggleEffect(t,e){if(this.currentEffectMode=t,!this.analyser||!this.audioCtx)return;this.scene&&this.scene.destroy();let n={el:t.type===k.af.CANVAS_2D?this.canvas2dEl:this.canvasWebglEl,analyser:this.analyser,audioCtx:this.audioCtx,stats:this.stats};this.scene=new L[this.currentEffectMode.id-1](n),e&&e()}}const S=n(1036),R=t=>{const e=Math.floor(t/3600),n=Math.floor(t%3600/60),i=Math.floor(t%60);return[e>0?e.toString().padStart(2,"0"):"",n.toString().padStart(2,"0"),i.toString().padStart(2,"0")].filter((t=>""!==t)).join(":")},T=t=>new Promise(((e,n)=>{S.read(t,{onSuccess:function(t){console.log(t);var n=t.tags.picture;if(n){var i="";for(let t=0;t<n.data.length;t++)i+=String.fromCharCode(n.data[t]);var s="data:"+n.format+";base64,"+btoa(i);e({title:t.tags.title,artist:t.tags.artist,cover:s})}},onError:function(t){console.error(t),n(t)}})})),H=async t=>new Promise(((e,n)=>{fetch(t).then((t=>(t.ok||n("Network response was not ok"),t.blob()))).then((async t=>{const n=URL.createObjectURL(t),i=await T(t);e({name:"Unknown",url:n,...i})}))}));var O=n(3536);const{Text:F}=c.A,D=()=>{const t=(0,s.useRef)(null),[e,n]=(0,s.useState)(!1),[i,a]=(0,s.useState)(0),[r,l]=(0,s.useState)(Number(localStorage.getItem("volume"))||.5),[c,z]=(0,s.useState)(0),N=(0,C.wA)(),A=(0,C.d4)((t=>t.common.playList)),L=(0,C.d4)((t=>t.common.randomPlayList)),S=(0,C.d4)((t=>t.common.currentItem)),T=(0,C.d4)((t=>t.common.playListVisible)),D=(0,C.d4)((t=>t.common.playMode)),P=(0,C.d4)((t=>t.common.effectMode)),V=(0,s.useRef)(r),B=(0,s.useRef)(!1),G=(0,s.useRef)(),_=async()=>{var e,n,i;null===(e=G.current)||void 0===e||e.stopVisualize(),await(null===(n=t.current)||void 0===n?void 0:n.play());const s=t.current.captureStream();null===(i=G.current)||void 0===i||i.visualize(s)},I=async()=>{var e,n;null===(e=t.current)||void 0===e||e.pause(),null===(n=G.current)||void 0===n||n.stopVisualize()},q=e=>{t.current&&(t.current.volume=e,l(e),e&&(V.current=e,localStorage.setItem("volume",e.toString())))},W=()=>{const t=D===k.DC.RANDOM?L:A,e=t.findIndex((t=>t.url===(null===S||void 0===S?void 0:S.url)));e<t.length-1?N((0,E.Oj)(t[e+1])):N((0,E.Oj)(t[0]))};return(0,s.useEffect)((()=>{B.current&&(S?(_(),n(!0)):(I(),n(!1)))}),[S]),(0,s.useEffect)((()=>{k.C6;Promise.all(k.C6.map(H)).then((t=>{const e=[...A,...t];N((0,E.Y6)(e)),N((0,E.Oj)(e[0])),setTimeout((()=>{B.current=!0}),1e3)})),G.current=new M}),[]),(0,s.useEffect)((()=>{D===k.DC.RANDOM&&N((0,E.X5)((0,O.shuffle)([...A])))}),[A,D]),(0,s.useEffect)((()=>{var t;P&&(null===(t=G.current)||void 0===t||t.toggleEffect(P,(()=>{var t,e,n;null!==(t=G.current)&&void 0!==t&&t.stream&&(null===(e=G.current)||void 0===e||e.visualize(null===(n=G.current)||void 0===n?void 0:n.stream))})))}),[P]),(0,d.jsxs)(o,{children:[(0,d.jsx)("audio",{ref:t,src:null===S||void 0===S?void 0:S.url,onTimeUpdate:()=>{t.current&&(a(t.current.currentTime),z(t.current.duration))},onEnded:()=>{t.current&&(D===k.DC.SINGLE?(t.current.currentTime=0,_()):W())}}),(0,d.jsxs)("div",{className:"audio-player",children:[(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)(h.A,{min:0,max:c,step:.1,value:i,onChange:e=>{t.current&&(t.current.currentTime=e)}})}),(0,d.jsxs)("div",{className:"left-bar",children:[(0,d.jsx)("div",{className:"cover",style:{backgroundImage:"url(".concat(null===S||void 0===S?void 0:S.cover,")")}}),(0,d.jsxs)("div",{className:"col",children:[(0,d.jsx)(F,{className:"name",ellipsis:!0,children:null!==S&&void 0!==S&&S.title?"".concat(null===S||void 0===S?void 0:S.title," - ").concat(null===S||void 0===S?void 0:S.artist):null===S||void 0===S?void 0:S.name}),(0,d.jsxs)("div",{className:"time",children:[R(i)," / ",R(c)]})]})]}),(0,d.jsxs)("div",{className:"center-bar",children:[(0,d.jsx)("div",{className:"pager-btn prev-btn",onClick:()=>{const t=D===k.DC.RANDOM?L:A,e=t.findIndex((t=>t.url===(null===S||void 0===S?void 0:S.url)));N(e>0?(0,E.Oj)(t[e-1]):(0,E.Oj)(t[t.length-1]))},children:(0,d.jsx)(v,{})}),(0,d.jsx)("div",{className:"play-btn",onClick:()=>{S&&t.current&&(e?I():_(),n(!e))},children:e?(0,d.jsx)(u,{}):(0,d.jsx)(p,{})}),(0,d.jsx)("div",{className:"pager-btn next-btn",onClick:W,children:(0,d.jsx)(x,{})})]}),(0,d.jsxs)("div",{className:"right-bar",children:[(0,d.jsxs)("div",{className:"volume-wrapper",children:[(0,d.jsx)("div",{className:"btn volume-btn",onClick:()=>q(r?0:V.current),children:0===r?(0,d.jsx)(f,{}):(0,d.jsx)(m,{})}),(0,d.jsx)(h.A,{className:"volume-slider",min:0,max:1,step:.01,value:r,onChange:q})]}),(0,d.jsxs)("div",{className:"btn mode-btn",onClick:()=>(t=>{const e=(t+1)%k.wi;N((0,E.Zk)(e))})(D),children:[D===k.DC.LOOP&&(0,d.jsx)(b,{}),D===k.DC.SINGLE&&(0,d.jsx)(y,{}),D===k.DC.RANDOM&&(0,d.jsx)(j,{})]}),(0,d.jsx)("div",{className:"btn list-btn",onClick:()=>N((0,E.sJ)(!T)),children:(0,d.jsx)(w,{})}),(0,d.jsx)("div",{className:"btn fullscreen-btn",onClick:()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},children:(0,d.jsx)(g,{})})]})]})]})};var P,V;const B=(0,n(909).AH)(P||(P=(0,a.A)(["\n  ::-webkit-scrollbar-track-piece{\n    background-color: rgba(255, 255, 255, 0.3);\n    -webkit-border-radius:5px;\n  }\n  ::-webkit-scrollbar{\n    width: 4px;\n    height: 4px;\n  }\n  ::-webkit-scrollbar-thumb:vertical{\n    height:18px;\n    background-color: white;\n    -webkit-border-radius: 8px;\n    outline-offset:-2px;\n  }\n\n  ::-webkit-scrollbar-thumb:horizontal{\n    width: 18px;\n    background-color: #ccc;\n    -webkit-border-radius: 8px;\n  }\n\n  ::-webkit-scrollbar-thumb:hover{\n    height:18px;\n    background-color:#aaa;\n    -webkit-border-radius: 8px;\n  }\n"]))),G=r.A.div(V||(V=(0,a.A)(["\n  position: absolute;\n  right: 20px;\n  top: 50px;\n  bottom: 100px;\n  width: 300px;\n  background-color: rgba(0,0,0,0.4);\n  border-radius: 20px;\n\n  color: #f0f0f0;\n\n  .header{\n    padding: 0 15px;\n    text-align: left;\n    font-weight: 600;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    height: 50px;\n\n    .add-btn{\n      width: 30px;\n      height: 24px;\n      line-height: 22px;\n      text-align: center;\n      border-radius: 5px;\n      border: 1px solid #999;\n      font-size: 24px;\n      font-weight: 400;\n      color: #999;\n      cursor: pointer;\n    }\n  }\n\n  .body{\n    position: absolute;\n    top: 50px;\n    left: 0;\n    right: 0;\n    bottom: 50px;\n    overflow: auto;\n\n    ",";\n  }\n\n  .list-item{\n    background-color: #ffffff05;\n    padding: 10px 15px;\n    text-align: left;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .text{\n      color: #999;\n    }\n\n    .delete-btn{\n      color: #999;\n\n      &:hover{\n        color:#eee;\n      }\n    }\n\n    &.active{\n      background-color: #ffffff10;\n      .text{\n        color: #fff;\n        text-shadow: 0 0 2px #fff;\n      }\n    }\n  }\n\n  .footer{\n    position: absolute;\n    bottom: 0;\n    padding: 15px 0;\n    text-align: center;\n    left: 0;\n    right: 0;\n    color: #ffffff80;\n  }\n"])),B),{Text:_}=c.A,I=()=>{const t=(0,C.wA)(),e=(0,C.d4)((t=>t.common.playList)),n=(0,C.d4)((t=>t.common.currentItem)),i=s.createRef(),a=async n=>{const i=Array.from(n).map((async t=>{const e=URL.createObjectURL(t);return{name:t.name.split(".")[0],url:e,...await T(t)}})),s=await Promise.all(i);t((0,E.Y6)([...e,...s]))};return(0,d.jsxs)(G,{onDrop:t=>{t.preventDefault(),t.stopPropagation();const e=t.dataTransfer.files;e.length>0&&a(e)},onDragOver:t=>{t.preventDefault(),t.stopPropagation()},children:[(0,d.jsxs)("div",{className:"header",children:[(0,d.jsx)("div",{className:"title",children:"Play List"}),(0,d.jsxs)("div",{className:"action",children:[(0,d.jsx)("div",{className:"add-btn",onClick:t=>{var e;t.stopPropagation(),null===(e=i.current)||void 0===e||e.click()},children:"+"}),(0,d.jsx)("input",{style:{display:"none"},ref:i,type:"file",onChange:t=>{t.target.files&&a(t.target.files)},multiple:!0,accept:"audio/*"}),(0,d.jsx)("div",{className:"btn collapse-btn"})]})]}),(0,d.jsx)("div",{className:"body",children:(0,d.jsx)("div",{className:"list-inner",children:e.map(((i,s)=>(0,d.jsxs)("div",{className:"list-item ".concat((null===n||void 0===n?void 0:n.url)===i.url?"active":""),onDoubleClick:()=>t((0,E.Oj)(i)),children:[(0,d.jsx)(_,{className:"text",ellipsis:!0,children:i.title?"".concat(i.title," - ").concat(i.artist):i.name}),(0,d.jsx)("div",{className:"delete-btn",onClick:n=>{n.stopPropagation();let i=e.slice();i.splice(s,1),t((0,E.Y6)(i))},children:"\u2715"})]},s)))})}),(0,d.jsx)("div",{className:"footer",children:(0,d.jsx)("div",{className:"note",children:"drag your music here"})})]})};var q=n(8304);const W=n.p+"static/media/donate.611c23c08827fdd9729e.png";var U;const Y=r.A.div(U||(U=(0,a.A)(["\n  position: absolute;\n  top: 40%;\n  left: 10px;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  width: 50px;\n  height: 100px;\n  transform: translateY(-50%);\n  row-gap: 15px;\n  font-family: var(--font-family);\n  .dot{\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    border: 2px solid white;\n    transition: all 0.2s;\n    cursor: pointer;\n    transform: scale(1);\n    &:hover, &.active{\n      box-shadow: inset 0 0 2px 4px white;\n    }\n    &:hover{\n      span{\n        transform: translateX(0);\n        opacity: 1;\n      }\n    }\n\n    span{\n      position: absolute;\n      left: 30px;\n      color: white;\n      width: 100px;\n      text-align: left;\n      line-height: 15px;\n      opacity: 0;\n      transition: all 0.2s 0.1s;\n      transform: translateX(-40px);\n    }\n  }\n"]))),Z=()=>{const t=(0,C.wA)(),e=(0,C.d4)((t=>t.common.effectMode));return(0,d.jsx)(Y,{children:k.Ap.map(((n,i)=>(0,d.jsx)("div",{className:"dot ".concat(n===e?"active":""),onClick:()=>t((0,E.Sd)(n)),children:(0,d.jsx)("span",{children:n.name})},i)))})};const J=function(){const[t,e]=(0,s.useState)(!1),n=(0,C.d4)((t=>t.common.playListVisible)),i=(0,C.d4)((t=>t.common.effectMode));return(0,d.jsxs)("div",{className:"App",children:[(0,d.jsx)("canvas",{id:"canvas-2d",className:"canvas ".concat(i.type===k.af.CANVAS_2D?"":"hidden")}),(0,d.jsx)("canvas",{id:"canvas-webgl",className:"canvas ".concat(i.type===k.af.WEBGL?"":"hidden")}),(0,d.jsx)(Z,{}),(0,d.jsx)(D,{}),n&&(0,d.jsx)(I,{}),(0,d.jsxs)("div",{className:"links",children:[(0,d.jsx)("a",{href:"mailto:77941075@qq.com",children:"Email"})," \xb7 ",(0,d.jsx)("div",{className:"link",onClick:()=>e(!0),children:"Donate"})]}),(0,d.jsx)(q.A,{width:200,style:{display:"none"},src:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?x-oss-process=image/blur,r_50,s_50/quality,q_1/resize,m_mfit,h_200,w_200",preview:{visible:t,src:W,toolbarRender:()=>[(0,d.jsx)("div",{})],onVisibleChange:t=>{e(t)}}})]})}}}]);
//# sourceMappingURL=53.e9cabfec.chunk.js.map